<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/segmentio/nightmare#readme"

    >nightmare (v2.10.0)</a>
</h1>
<h4>A high-level browser automation library.</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.nightmare">module nightmare</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.nightmare">
            function <span class="apidocSignatureSpan"></span>nightmare
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.Promise">
            function <span class="apidocSignatureSpan">nightmare.</span>Promise
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.action">
            function <span class="apidocSignatureSpan">nightmare.</span>action
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.frame_manager">
            function <span class="apidocSignatureSpan">nightmare.</span>frame_manager
            <span class="apidocSignatureSpan">(window)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">nightmare.</span>actions</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">nightmare.</span>childActions</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">nightmare.</span>javascript</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">nightmare.</span>namespaces</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">nightmare.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.nightmare.actions">module nightmare.actions</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.actions.authentication">
            function <span class="apidocSignatureSpan">nightmare.actions.</span>authentication
            <span class="apidocSignatureSpan">(login, password, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.actions.back">
            function <span class="apidocSignatureSpan">nightmare.actions.</span>back
            <span class="apidocSignatureSpan">(done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.actions.check">
            function <span class="apidocSignatureSpan">nightmare.actions.</span>check
            <span class="apidocSignatureSpan">(selector, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.actions.click">
            function <span class="apidocSignatureSpan">nightmare.actions.</span>click
            <span class="apidocSignatureSpan">(selector, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.actions.engineVersions">
            function <span class="apidocSignatureSpan">nightmare.actions.</span>engineVersions
            <span class="apidocSignatureSpan">(done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.actions.evaluate">
            function <span class="apidocSignatureSpan">nightmare.actions.</span>evaluate
            <span class="apidocSignatureSpan">(fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.actions.exists">
            function <span class="apidocSignatureSpan">nightmare.actions.</span>exists
            <span class="apidocSignatureSpan">(selector, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.actions.forward">
            function <span class="apidocSignatureSpan">nightmare.actions.</span>forward
            <span class="apidocSignatureSpan">(done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.actions.html">
            function <span class="apidocSignatureSpan">nightmare.actions.</span>html
            <span class="apidocSignatureSpan">(path, saveType, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.actions.inject">
            function <span class="apidocSignatureSpan">nightmare.actions.</span>inject
            <span class="apidocSignatureSpan">(type, file, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.actions.insert">
            function <span class="apidocSignatureSpan">nightmare.actions.</span>insert
            <span class="apidocSignatureSpan">(selector, text, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.actions.mousedown">
            function <span class="apidocSignatureSpan">nightmare.actions.</span>mousedown
            <span class="apidocSignatureSpan">(selector, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.actions.mouseover">
            function <span class="apidocSignatureSpan">nightmare.actions.</span>mouseover
            <span class="apidocSignatureSpan">(selector, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.actions.mouseup">
            function <span class="apidocSignatureSpan">nightmare.actions.</span>mouseup
            <span class="apidocSignatureSpan">(selector, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.actions.path">
            function <span class="apidocSignatureSpan">nightmare.actions.</span>path
            <span class="apidocSignatureSpan">(done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.actions.pdf">
            function <span class="apidocSignatureSpan">nightmare.actions.</span>pdf
            <span class="apidocSignatureSpan">(path, options, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.actions.refresh">
            function <span class="apidocSignatureSpan">nightmare.actions.</span>refresh
            <span class="apidocSignatureSpan">(done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.actions.screenshot">
            function <span class="apidocSignatureSpan">nightmare.actions.</span>screenshot
            <span class="apidocSignatureSpan">(path, clip, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.actions.scrollTo">
            function <span class="apidocSignatureSpan">nightmare.actions.</span>scrollTo
            <span class="apidocSignatureSpan">(y, x, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.actions.select">
            function <span class="apidocSignatureSpan">nightmare.actions.</span>select
            <span class="apidocSignatureSpan">(selector, option, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.actions.title">
            function <span class="apidocSignatureSpan">nightmare.actions.</span>title
            <span class="apidocSignatureSpan">(done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.actions.type">
            function <span class="apidocSignatureSpan">nightmare.actions.</span>type
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.actions.uncheck">
            function <span class="apidocSignatureSpan">nightmare.actions.</span>uncheck
            <span class="apidocSignatureSpan">(selector, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.actions.url">
            function <span class="apidocSignatureSpan">nightmare.actions.</span>url
            <span class="apidocSignatureSpan">(done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.actions.useragent">
            function <span class="apidocSignatureSpan">nightmare.actions.</span>useragent
            <span class="apidocSignatureSpan">(useragent, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.actions.viewport">
            function <span class="apidocSignatureSpan">nightmare.actions.</span>viewport
            <span class="apidocSignatureSpan">(width, height, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.actions.visible">
            function <span class="apidocSignatureSpan">nightmare.actions.</span>visible
            <span class="apidocSignatureSpan">(selector, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.actions.wait">
            function <span class="apidocSignatureSpan">nightmare.actions.</span>wait
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">nightmare.actions.</span>cookies</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.nightmare.frame_manager">module nightmare.frame_manager</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.frame_manager.frame_manager">
            function <span class="apidocSignatureSpan">nightmare.</span>frame_manager
            <span class="apidocSignatureSpan">(window)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.frame_manager.super_">
            function <span class="apidocSignatureSpan">nightmare.frame_manager.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.nightmare.javascript">module nightmare.javascript</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.javascript.execute">
            function <span class="apidocSignatureSpan">nightmare.javascript.</span>execute
            <span class="apidocSignatureSpan">(obj )</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.nightmare.javascript.inject">
            function <span class="apidocSignatureSpan">nightmare.javascript.</span>inject
            <span class="apidocSignatureSpan">(obj )</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.nightmare" id="apidoc.module.nightmare">module nightmare</a></h1>


    <h2>
        <a href="#apidoc.element.nightmare.nightmare" id="apidoc.element.nightmare.nightmare">
        function <span class="apidocSignatureSpan"></span>nightmare
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Nightmare(options) {
  if (!(this instanceof Nightmare)) return new Nightmare(options);
  options = options || {};
  var electronArgs = {};
  var self = this;

  options.waitTimeout = options.waitTimeout || DEFAULT_WAIT_TIMEOUT;
  options.gotoTimeout = options.gotoTimeout || DEFAULT_GOTO_TIMEOUT;
  options.pollInterval = options.pollInterval || DEFAULT_POLL_INTERVAL;

  options.typeInterval = options.typeInterval || DEFAULT_TYPE_INTERVAL;
  options.executionTimeout = options.executionTimeout || DEFAULT_EXECUTION_TIMEOUT;
  options.webPreferences = options.webPreferences || {};

  // null is a valid value, which will result in the use of the electron default behavior, which is to persist storage.
  // The default behavior for nightmare will be to use non-persistent storage.
  // http://electron.atom.io/docs/api/browser-window/#new-browserwindowoptions
  options.webPreferences.partition = options.webPreferences.partition !== undefined ? options.webPreferences.partition : DEFAULT_PARTITION
;

  options.Promise = options.Promise || Nightmare.Promise || Promise;

  var electron_path = options.electronPath || default_electron_path

  if (options.paths) {
    electronArgs.paths = options.paths;
  }

  if (options.switches) {
    electronArgs.switches = options.switches;
  }
  options.maxAuthRetries = options.maxAuthRetries || MAX_AUTH_RETRIES;

  electronArgs.loadTimeout = options.loadTimeout;
  if(options.loadTimeout &#x26;&#x26; options.gotoTimeout &#x26;&#x26; options.loadTimeout &#x3c; options.gotoTimeout){
    debug(`WARNING:  load timeout of ${options.loadTimeout} is shorter than goto timeout of ${options.gotoTimeout}`);
  }

  electronArgs.dock = options.dock || false;

  attachToProcess(this);

  // initial state
  this.state = &#x27;initial&#x27;;
  this.running = false;
  this.ending = false;
  this.ended = false;
  this._queue = [];
  this._headers = {};
  this.options = options;

  debug(&#x27;queuing process start&#x27;);
  this.queue((done) =&#x3e; {

    this.proc = proc.spawn(electron_path, [runner].concat(JSON.stringify(electronArgs)), {
      stdio: [null, null, null, &#x27;ipc&#x27;],
      env: defaults(options.env || {}, process.env)
    });

    this.proc.stdout.pipe(split2()).on(&#x27;data&#x27;, (data) =&#x3e; {
      electronLog.stdout(data);
    });

    this.proc.stderr.pipe(split2()).on(&#x27;data&#x27;, (data) =&#x3e; {
      electronLog.stderr(data);
    });

    this.proc.on(&#x27;close&#x27;, (code) =&#x3e; {
      if(!self.ended){
        handleExit(code, self, noop);
      }
    });

    this.child = child(this.proc);

    this.child.once(&#x27;die&#x27;, function(err){
      debug(&#x27;dying: &#x27; + err);
      self.die = err;
    });

    // propagate console.log(...) through
    this.child.on(&#x27;log&#x27;, function() {
      log.apply(log, arguments);
    });

    this.child.on(&#x27;uncaughtException&#x27;, function(stack) {
      console.error(&#x27;Nightmare runner error:\n\n%s\n&#x27;, &#x27;\t&#x27; + stack.replace(/\n/g, &#x27;\n\t&#x27;));
      endInstance(self, noop);
      process.exit(1);
    });

    this.child.on(&#x27;page&#x27;, function(type) {
      log.apply(null, [&#x27;page-&#x27; + type].concat(sliced(arguments, 1)));
    });

    // propogate events through to debugging
    this.child.on(&#x27;did-finish-load&#x27;, function () { log(&#x27;did-finish-load&#x27;, JSON.stringify(Array.prototype.slice.call(arguments))); });
    this.child.on(&#x27;did-fail-load&#x27;, function () { log(&#x27;did-fail-load&#x27;, JSON.stringify(Array.prototype.slice.call(arguments))); });
    this.child.on(&#x27;did-fail-provisional-load&#x27;, function () { log(&#x27;did-fail-provisional-load&#x27;, JSON.stringify(Array.prototype.slice
.call(arguments))); });
    this.child.on(&#x27;did-frame-finish-load&#x27;, function () { log(&#x27;did-frame-finish-load&#x27;, JSON.stringify(Array.prototype.slice.call(
arguments))); });
    this.child.on(&#x27;did-start-loading&#x27;, function () { log(&#x27;did-start-loading&#x27;, JSON.stringify(Array.prototype.slice.call(arguments
))); });
    this.child.on(&#x27;did-stop-loading&#x27;, function () { log(&#x27;did-stop-loading&#x27;, JSON.stringify(Array.prototype.slice.call(arguments))); });
    this.child.on(&#x27;did-get-response-details&#x27;, function () { log(&#x27;did-get-response-details&#x27;, JSON.stringify(Array.prototype.slice
.call(arguments))); }); ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.nightmare.Promise" id="apidoc.element.nightmare.Promise">
        function <span class="apidocSignatureSpan">nightmare.</span>Promise
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Promise() { [native code] }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.nightmare.action" id="apidoc.element.nightmare.action">
        function <span class="apidocSignatureSpan">nightmare.</span>action
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">action = function () {
  var name = arguments[0], childfn, parentfn;
  if(arguments.length === 2) {
    parentfn = arguments[1];
  } else {
    parentfn = arguments[2];
    childfn = arguments[1];
  }

  // support functions and objects
  // if it&#x27;s an object, wrap it&#x27;s
  // properties in the queue function

  if(parentfn) {
    if (typeof parentfn === &#x27;function&#x27;) {
      Nightmare.prototype[name] = queued(name, parentfn);
    } else {
      if (!~Nightmare.namespaces.indexOf(name)) {
        Nightmare.namespaces.push(name);
      }
      Nightmare.prototype[name] = function() {
        var self = this;
        return keys(parentfn).reduce(function (obj, key) {
          obj[key] = queued(name, parentfn[key]).bind(self)
        return obj;
        }, {});
      }
    }
  }

  if(childfn) {
    if (typeof childfn === &#x27;function&#x27;) {
     Nightmare.childActions[name] = childfn;
    } else {
      for(var key in childfn){
        Nightmare.childActions[name+&#x27;.&#x27;+key] = childfn;
      }
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var Promise = require(&#x27;bluebird&#x27;);

var nightmare = Nightmare({ Promise });
```

### Extending Nightmare

#### Nightmare.<span class="apidocCodeKeywordSpan">action</span>(name, [electronAction|electronNamespace], action|namespace)

You can add your own custom actions to the Nightmare prototype. Here&#x27;s an example:

```js
Nightmare.action(&#x27;size&#x27;, function (done) {
this.evaluate_now(function() {
  var w = Math.max(document.documentElement.clientWidth, window.innerWidth || 0)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.nightmare.frame_manager" id="apidoc.element.nightmare.frame_manager">
        function <span class="apidocSignatureSpan">nightmare.</span>frame_manager
        <span class="apidocSignatureSpan">(window)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function FrameManager(window) {
  if (!(this instanceof FrameManager)) return new FrameManager(window);

  EventEmitter.call(this);
  var subscribed = false;
  var requestedFrame = false;
  var frameRequestTimeout;
  var self = this;

  this.on(&#x27;newListener&#x27;, subscribe);
  this.on(&#x27;removeListener&#x27;, unsubscribe);

  function subscribe(eventName) {
    if (!subscribed &#x26;&#x26; eventName === &#x27;data&#x27;) {
      parent.emit(&#x27;log&#x27;, &#x27;subscribing to browser window frames&#x27;);
      window.webContents.beginFrameSubscription(receiveFrame);
    }
  }

  function unsubscribe() {
    if (!self.listenerCount(&#x27;data&#x27;)) {
      parent.emit(&#x27;log&#x27;, &#x27;unsubscribing from browser window frames&#x27;)
      window.webContents.endFrameSubscription();
      subscribed = false;
    }
  }

  function receiveFrame(buffer) {
    requestedFrame = false;
    clearTimeout(frameRequestTimeout);
    self.emit(&#x27;data&#x27;, buffer);
  }

<span class="apidocCodeCommentSpan">  /**
   * In addition to listening for events, calling `requestFrame` will ensure
   * that a frame is queued up to render (instead of just waiting for the next
   * time the browser chooses to draw a frame).
   * @param {Function} [callback] Called when the frame is rendered.
   * @param {Number} [timeout=1000] If no frame has been rendered after this
       many milliseconds, run the callback anyway. In this case, The
       callback&#x27;s first argument, an image buffer, will be `null`.
   */
</span>  this.requestFrame = function(callback, timeout) {
    timeout = (timeout == undefined) ? 1000 : timeout;

    if (callback) {
      this.once(&#x27;data&#x27;, callback);
    }

    if (!requestedFrame) {
      requestedFrame = true;

      // Force the browser to render new content by using the debugger to
      // highlight a portion of the page. This way, we can guarantee a change
      // that both requires rendering a frame and does not actually affect
      // the content of the page.
      if (!window.webContents.debugger.isAttached()) {
        try {
          window.webContents.debugger.attach();
        }
        catch (error) {
          parent.emit(&#x27;log&#x27;, `Failed to attach to debugger for frame subscriptions: ${error}`);
          this.emit(&#x27;data&#x27;, null);
          return;
        }
      }

      if (timeout) {
        frameRequestTimeout = setTimeout(function() {
          parent.emit(&#x27;log&#x27;, `FrameManager timing out after ${timeout} ms with no new rendered frames`);
          self.emit(&#x27;data&#x27;, null)
        }, timeout);
      }

      parent.emit(&#x27;log&#x27;, &#x27;Highlighting page to trigger rendering.&#x27;);
      window.webContents.debugger.sendCommand(&#x27;DOM.enable&#x27;)
      window.webContents.debugger.sendCommand(
        &#x27;DOM.highlightRect&#x27;, HIGHLIGHT_STYLE, function(error) {
          window.webContents.debugger.sendCommand(&#x27;DOM.hideHighlight&#x27;);
          window.webContents.debugger.detach();
        });
    }
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>












</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.nightmare.actions" id="apidoc.module.nightmare.actions">module nightmare.actions</a></h1>


    <h2>
        <a href="#apidoc.element.nightmare.actions.authentication" id="apidoc.element.nightmare.actions.authentication">
        function <span class="apidocSignatureSpan">nightmare.actions.</span>authentication
        <span class="apidocSignatureSpan">(login, password, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">authentication = function (login, password, done) {
  debug(&#x27;.authentication()&#x27;);
  this.child.call(&#x27;authentication&#x27;, login, password, done);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### .engineVersions()
Gets the versions for Electron and Chromium.

#### .useragent(useragent)
Set the `useragent` used by electron.

#### .<span class="apidocCodeKeywordSpan">authentication</span>(user, password)
Set the `user` and `password` for accessing a web page using basic authentication. Be sure to set it before calling `.goto(url)`.

#### .end()
Complete any queue operations, disconnect and close the electron process.  Note that if you&#x27;re using promises, `.then()` must
 be called after `.end()` to run the `.end()` task.  Also note that if using a `.end()` callback, the `.end()` call is equivalent
 to calling `.end()` followed by `.then(fn)`.  Consider:

```js
nightmare
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.nightmare.actions.back" id="apidoc.element.nightmare.actions.back">
        function <span class="apidocSignatureSpan">nightmare.actions.</span>back
        <span class="apidocSignatureSpan">(done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">back = function (done) {
  debug(&#x27;.back()&#x27;);
  this.evaluate_now(function() {
    window.history.back();
  }, done);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- `details`: A string with additional details about the error. This may be null or an empty string.
- `url`: The URL that failed to load

Note that any valid response from a server is considered “successful.” That means things like 404 “not found” errors are successful
 results for `goto`. Only things that would cause no page to appear in the browser window, such as no server responding at the given
 address, the server hanging up in the middle of a response, or invalid URLs, are errors.

You can also adjust how long `goto` will wait before timing out by setting the [`gotoTimeout` option](#gototimeout-default-30s)
on the Nightmare constructor.

#### .<span class="apidocCodeKeywordSpan">back</span>()
Go back to the previous page.

#### .forward()
Go forward to the next page.

#### .refresh()
Refresh the current page.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.nightmare.actions.check" id="apidoc.element.nightmare.actions.check">
        function <span class="apidocSignatureSpan">nightmare.actions.</span>check
        <span class="apidocSignatureSpan">(selector, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">check = function (selector, done) {
  debug(&#x27;.check() &#x27; + selector);
  this.evaluate_now(function(selector) {
    var element = document.querySelector(selector);
    var event = document.createEvent(&#x27;HTMLEvents&#x27;);
    element.checked = true;
    event.initEvent(&#x27;change&#x27;, true, true);
    element.dispatchEvent(event);
  }, done, selector);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
&#x3e; If you don&#x27;t need the keyboard events, consider using `.insert()` instead as it will be faster and more robust.

#### .insert(selector[, text])
Similar to `.type()`. `.insert()` enters the `text` provided into the `selector` element.  Empty or falsey values provided for `
text` will clear the selector&#x27;s value.

`.insert()` is faster than `.type()` but does not trigger the keyboard events.

#### .<span class="apidocCodeKeywordSpan">check</span>(selector)
checks the `selector` checkbox element.

#### .uncheck(selector)
unchecks the `selector` checkbox element.

#### .select(selector, option)
Changes the `selector` dropdown element to the option with attribute [value=`option`]
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.nightmare.actions.click" id="apidoc.element.nightmare.actions.click">
        function <span class="apidocSignatureSpan">nightmare.actions.</span>click
        <span class="apidocSignatureSpan">(selector, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">click = function (selector, done) {
  debug(&#x27;.click() on &#x27; + selector);
  this.evaluate_now(function (selector) {
    document.activeElement.blur();
    var element = document.querySelector(selector);
    if (!element) {
      throw new Error(&#x27;Unable to find element by selector: &#x27; + selector);
    }
    var event = document.createEvent(&#x27;MouseEvent&#x27;);
    event.initEvent(&#x27;click&#x27;, true, true);
    element.dispatchEvent(event);
  }, done, selector);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```js
var Nightmare = require(&#x27;nightmare&#x27;);		
var nightmare = Nightmare({ show: true });

nightmare
.goto(&#x27;https://duckduckgo.com&#x27;)
.type(&#x27;#search_form_input_homepage&#x27;, &#x27;github nightmare&#x27;)
.<span class="apidocCodeKeywordSpan">click</span>(&#x27;#search_button_homepage&#x27;)
.wait(&#x27;#zero_click_wrapper .c-info__title a&#x27;)
.evaluate(function () {
  return document.querySelector(&#x27;#zero_click_wrapper .c-info__title a&#x27;).href;
})
.end()
.then(function (result) {
  console.log(result);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.nightmare.actions.engineVersions" id="apidoc.element.nightmare.actions.engineVersions">
        function <span class="apidocSignatureSpan">nightmare.actions.</span>engineVersions
        <span class="apidocSignatureSpan">(done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">engineVersions = function (done){
  debug(&#x27;.engineVersions()&#x27;);
  done(null, this.engineVersions);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Defines the number of times to retry an authentication when set up with `.authenticate()`.
```js
var nightmare = Nightmare({
  maxAuthRetries: 3
});
```

#### .<span class="apidocCodeKeywordSpan">engineVersions</span>()
Gets the versions for Electron and Chromium.

#### .useragent(useragent)
Set the `useragent` used by electron.

#### .authentication(user, password)
Set the `user` and `password` for accessing a web page using basic authentication. Be sure to set it before calling `.goto(url)`.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.nightmare.actions.evaluate" id="apidoc.element.nightmare.actions.evaluate">
        function <span class="apidocSignatureSpan">nightmare.actions.</span>evaluate
        <span class="apidocSignatureSpan">(fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">evaluate = function (fn) {
  var args = sliced(arguments);
  var done = args[args.length-1];
  var self = this;
  var newDone = function(){
    clearTimeout(timeoutTimer);
    done.apply(self, arguments);
  };
  var newArgs = [fn, newDone].concat(args.slice(1,-1));
  if (typeof fn !== &#x27;function&#x27;) {
    return done(new Error(&#x27;.evaluate() fn should be a function&#x27;));
  }
  debug(&#x27;.evaluate() fn on the page&#x27;);
  var timeoutTimer = setTimeout(function(){
    done(new Error(`Evaluation timed out after ${self.options.executionTimeout}msec.  Are you calling done() or resolving your promises
?`));
  }, self.options.executionTimeout);
  this.evaluate_now.apply(this, newArgs);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var nightmare = Nightmare({ show: true });

nightmare
.goto(&#x27;https://duckduckgo.com&#x27;)
.type(&#x27;#search_form_input_homepage&#x27;, &#x27;github nightmare&#x27;)
.click(&#x27;#search_button_homepage&#x27;)
.wait(&#x27;#zero_click_wrapper .c-info__title a&#x27;)
.<span class="apidocCodeKeywordSpan">evaluate</span>(function () {
  return document.querySelector(&#x27;#zero_click_wrapper .c-info__title a&#x27;).href;
})
.end()
.then(function (result) {
  console.log(result);
})
.catch(function (error) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.nightmare.actions.exists" id="apidoc.element.nightmare.actions.exists">
        function <span class="apidocSignatureSpan">nightmare.actions.</span>exists
        <span class="apidocSignatureSpan">(selector, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">exists = function (selector, done) {
  debug(&#x27;.exists() for &#x27; + selector);
  this.evaluate_now(function(selector) {
    return (document.querySelector(selector)!==null);
  }, done, selector);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Wait until the `fn` evaluated on the page with `arg1, arg2,...` returns `true`. All the `args` are optional. See `.evaluate()` for
 usage.

#### .header([header, value])
Add a header override for all HTTP requests.  If `header` is undefined, the header overrides will be reset.

### Extract from the Page

#### .<span class="apidocCodeKeywordSpan">exists</span>(selector)
Returns whether the selector exists or not on the page.

#### .visible(selector)
Returns whether the selector is visible or not

#### .on(event, callback)
Capture page events with the callback. You have to call `.on()` before calling `.goto()`. Supported events are [documented here](
http://electron.atom.io/docs/api/web-contents/#instance-events).
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.nightmare.actions.forward" id="apidoc.element.nightmare.actions.forward">
        function <span class="apidocSignatureSpan">nightmare.actions.</span>forward
        <span class="apidocSignatureSpan">(done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">forward = function (done) {
  debug(&#x27;.forward()&#x27;);
  this.evaluate_now(function() {
    window.history.forward();
  }, done);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Note that any valid response from a server is considered “successful.” That means things like 404 “not found” errors are successful
 results for `goto`. Only things that would cause no page to appear in the browser window, such as no server responding at the given
 address, the server hanging up in the middle of a response, or invalid URLs, are errors.

You can also adjust how long `goto` will wait before timing out by setting the [`gotoTimeout` option](#gototimeout-default-30s)
on the Nightmare constructor.

#### .back()
Go back to the previous page.

#### .<span class="apidocCodeKeywordSpan">forward</span>()
Go forward to the next page.

#### .refresh()
Refresh the current page.

#### .click(selector)
Clicks the `selector` element once.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.nightmare.actions.html" id="apidoc.element.nightmare.actions.html">
        function <span class="apidocSignatureSpan">nightmare.actions.</span>html
        <span class="apidocSignatureSpan">(path, saveType, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">html = function (path, saveType, done) {
  debug(&#x27;.html()&#x27;);
  if (typeof path === &#x27;function&#x27; &#x26;&#x26; !saveType &#x26;&#x26; !done) {
    done = path;
    saveType = undefined;
    path = undefined;
  } else if (typeof path === &#x27;object&#x27; &#x26;&#x26; typeof saveType === &#x27;function&#x27; &#x26;&#x26; !done) {
    done = saveType;
    saveType = path;
    path = undefined;
  } else if (typeof saveType === &#x27;function&#x27; &#x26;&#x26; !done) {
    done = saveType;
    saveType = undefined;
  }
  this.child.call(&#x27;html&#x27;, path, saveType, function (error) {
    if (error) debug(error);
    done(error);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### .removeListener(event, callback)
Removes a given listener callback for an event.

#### .screenshot([path][, clip])
Takes a screenshot of the current page. Useful for debugging. The output is always a `png`. Both arguments are optional. If `path
` is provided, it saves the image to the disk. Otherwise it returns a `Buffer` of the image data. If `clip` is provided (as [documented
 here](https://github.com/atom/electron/blob/master/docs/api/browser-window.md#wincapturepagerect-callback)), the image will be
clipped to the rectangle.

#### .<span class="apidocCodeKeywordSpan">html</span>(path, saveType)
Save the current page as html as files to disk at the given path. Save type options are [here](https://github.com/atom/electron/
blob/master/docs/api/web-contents.md#webcontentssavepagefullpath-savetype-callback).

#### .pdf(path, options)
Saves a PDF to the specified `path`. Options are [here](https://github.com/electron/electron/blob/v1.4.4/docs/api/web-contents.md
#contentsprinttopdfoptions-callback).

#### .title()
Returns the title of the current page.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.nightmare.actions.inject" id="apidoc.element.nightmare.actions.inject">
        function <span class="apidocSignatureSpan">nightmare.actions.</span>inject
        <span class="apidocSignatureSpan">(type, file, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">inject = function (type, file, done) {
  debug(&#x27;.inject()-ing a file&#x27;);
  if (type === &#x27;js&#x27;) {
    var js = fs.readFileSync(file, { encoding: &#x27;utf-8&#x27; });
    this._inject(js, done);
  }
  else if (type === &#x27;css&#x27;) {
    var css = fs.readFileSync(file, { encoding: &#x27;utf-8&#x27; });
    this.child.call(&#x27;css&#x27;, css, done);
  }
  else {
    debug(&#x27;unsupported file type in .inject()&#x27;);
    done();
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
#### .scrollTo(top, left)
Scrolls the page to desired position. `top` and `left` are always relative to the top left corner of the document.

#### .viewport(width, height)

Set the viewport size.

#### .<span class="apidocCodeKeywordSpan">inject</span>(type, file)
Inject a local `file` onto the current page. The file `type` must be either `js` or `css`.

#### .evaluate(fn[, arg1, arg2,...])
Invokes `fn` on the page with `arg1, arg2,...`. All the `args` are optional. On completion it returns the return value of `fn`.
Useful for extracting information from the page. Here&#x27;s an example:

```js
var selector = &#x27;h1&#x27;;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.nightmare.actions.insert" id="apidoc.element.nightmare.actions.insert">
        function <span class="apidocSignatureSpan">nightmare.actions.</span>insert
        <span class="apidocSignatureSpan">(selector, text, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">insert = function (selector, text, done) {
  if (arguments.length === 2) {
    done = text
    text = null
  }

  debug(&#x27;.insert() %s into %s&#x27;, text, selector);
  var child = this.child;

  focusSelector.bind(this)(function(err) {
    if(err) {
      debug(&#x27;Unable to .insert() into non-existent selector %s&#x27;, selector);
      return done(err);
    }

    var blurDone = blurSelector.bind(this, done, selector);
    if ((text || &#x27;&#x27;) == &#x27;&#x27;) {
      this.evaluate_now(function(selector) {
        document.querySelector(selector).value = &#x27;&#x27;;
      }, blurDone, selector);
    } else {
      child.call(&#x27;insert&#x27;, text, blurDone);
    }
  }, selector);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
#### .type(selector[, text])
Enters the `text` provided into the `selector` element.  Empty or falsey values provided for `text` will clear the selector&#x27
;s value.

`.type()` mimics a user typing in a textbox and will emit the proper keyboard events

Key presses can also be fired using Unicode values with `.type()`. For example, if you wanted to fire an enter key press, you would
  write `.type(&#x27;body&#x27;, &#x27;\u000d&#x27;)`.

&#x3e; If you don&#x27;t need the keyboard events, consider using `.<span class="apidocCodeKeywordSpan">insert</span>()` instead
 as it will be faster and more robust.

#### .insert(selector[, text])
Similar to `.type()`. `.insert()` enters the `text` provided into the `selector` element.  Empty or falsey values provided for `
text` will clear the selector&#x27;s value.

`.insert()` is faster than `.type()` but does not trigger the keyboard events.

#### .check(selector)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.nightmare.actions.mousedown" id="apidoc.element.nightmare.actions.mousedown">
        function <span class="apidocSignatureSpan">nightmare.actions.</span>mousedown
        <span class="apidocSignatureSpan">(selector, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">mousedown = function (selector, done) {
  debug(&#x27;.mousedown() on &#x27; + selector);
  this.evaluate_now(function (selector) {
    var element = document.querySelector(selector);
    if (!element) {
      throw new Error(&#x27;Unable to find element by selector: &#x27; + selector);
    }
    var event = document.createEvent(&#x27;MouseEvent&#x27;);
    event.initEvent(&#x27;mousedown&#x27;, true, true);
    element.dispatchEvent(event);
  }, done, selector);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### .refresh()
Refresh the current page.

#### .click(selector)
Clicks the `selector` element once.

#### .<span class="apidocCodeKeywordSpan">mousedown</span>(selector)
Mousedown the `selector` element once.

#### .mouseup(selector)
Mouseup the `selector` element once.

#### .mouseover(selector)
Mouseover the `selector` element once.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.nightmare.actions.mouseover" id="apidoc.element.nightmare.actions.mouseover">
        function <span class="apidocSignatureSpan">nightmare.actions.</span>mouseover
        <span class="apidocSignatureSpan">(selector, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">mouseover = function (selector, done) {
  debug(&#x27;.mouseover() on &#x27; + selector);
  this.evaluate_now(function (selector) {
    var element = document.querySelector(selector);
    if (!element) {
      throw new Error(&#x27;Unable to find element by selector: &#x27; + selector);
    }
    var event = document.createEvent(&#x27;MouseEvent&#x27;);
    event.initMouseEvent(&#x27;mouseover&#x27;, true, true);
    element.dispatchEvent(event);
  }, done, selector);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### .mousedown(selector)
Mousedown the `selector` element once.

#### .mouseup(selector)
Mouseup the `selector` element once.

#### .<span class="apidocCodeKeywordSpan">mouseover</span>(selector)
Mouseover the `selector` element once.

#### .type(selector[, text])
Enters the `text` provided into the `selector` element.  Empty or falsey values provided for `text` will clear the selector&#x27
;s value.

`.type()` mimics a user typing in a textbox and will emit the proper keyboard events
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.nightmare.actions.mouseup" id="apidoc.element.nightmare.actions.mouseup">
        function <span class="apidocSignatureSpan">nightmare.actions.</span>mouseup
        <span class="apidocSignatureSpan">(selector, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">mouseup = function (selector, done) {
  debug(&#x27;.mouseup() on &#x27; + selector);
  this.evaluate_now(function (selector) {
    var element = document.querySelector(selector);
    if (!element) {
      throw new Error(&#x27;Unable to find element by selector: &#x27; + selector);
    }
    var event = document.createEvent(&#x27;MouseEvent&#x27;);
    event.initEvent(&#x27;mouseup&#x27;, true, true);
    element.dispatchEvent(event);
  }, done, selector);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### .click(selector)
Clicks the `selector` element once.

#### .mousedown(selector)
Mousedown the `selector` element once.

#### .<span class="apidocCodeKeywordSpan">mouseup</span>(selector)
Mouseup the `selector` element once.

#### .mouseover(selector)
Mouseover the `selector` element once.

#### .type(selector[, text])
Enters the `text` provided into the `selector` element.  Empty or falsey values provided for `text` will clear the selector&#x27
;s value.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.nightmare.actions.path" id="apidoc.element.nightmare.actions.path">
        function <span class="apidocSignatureSpan">nightmare.actions.</span>path
        <span class="apidocSignatureSpan">(done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">path = function (done) {
  debug(&#x27;.path() getting it&#x27;);
  this.evaluate_now(function() {
    return document.location.pathname;
  }, done);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### .title()
Returns the title of the current page.

#### .url()
Returns the url of the current page.

#### .<span class="apidocCodeKeywordSpan">path</span>()
Returns the path name of the current page.

### Cookies

#### .cookies.get(name)

Get a cookie by it&#x27;s `name`. The url will be the current url.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.nightmare.actions.pdf" id="apidoc.element.nightmare.actions.pdf">
        function <span class="apidocSignatureSpan">nightmare.actions.</span>pdf
        <span class="apidocSignatureSpan">(path, options, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pdf = function (path, options, done) {
  debug(&#x27;.pdf()&#x27;);
  if (typeof path === &#x27;function&#x27; &#x26;&#x26; !options &#x26;&#x26; !done) {
    done = path;
    options = undefined;
    path = undefined;
  } else if (typeof path === &#x27;object&#x27; &#x26;&#x26; typeof options === &#x27;function&#x27; &#x26;&#x26; !done){
    done = options;
    options = path;
    path = undefined;
  } else if (typeof options === &#x27;function&#x27; &#x26;&#x26; !done) {
    done = options;
    options = undefined;
  }
  this.child.call(&#x27;pdf&#x27;, path, options, function (error, pdf) {
    if (error) debug(error);
    var buf = new Buffer(pdf.data);
    debug(&#x27;.pdf() captured with length %s&#x27;, buf.length);
    path ? fs.writeFile(path, buf, done) : done(null, buf);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### .screenshot([path][, clip])
Takes a screenshot of the current page. Useful for debugging. The output is always a `png`. Both arguments are optional. If `path
` is provided, it saves the image to the disk. Otherwise it returns a `Buffer` of the image data. If `clip` is provided (as [documented
 here](https://github.com/atom/electron/blob/master/docs/api/browser-window.md#wincapturepagerect-callback)), the image will be
clipped to the rectangle.

#### .html(path, saveType)
Save the current page as html as files to disk at the given path. Save type options are [here](https://github.com/atom/electron/
blob/master/docs/api/web-contents.md#webcontentssavepagefullpath-savetype-callback).

#### .<span class="apidocCodeKeywordSpan">pdf</span>(path, options)
Saves a PDF to the specified `path`. Options are [here](https://github.com/electron/electron/blob/v1.4.4/docs/api/web-contents.md
#contentsprinttopdfoptions-callback).

#### .title()
Returns the title of the current page.

#### .url()
Returns the url of the current page.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.nightmare.actions.refresh" id="apidoc.element.nightmare.actions.refresh">
        function <span class="apidocSignatureSpan">nightmare.actions.</span>refresh
        <span class="apidocSignatureSpan">(done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">refresh = function (done) {
  debug(&#x27;.refresh()&#x27;);
  this.evaluate_now(function() {
    window.location.reload();
  }, done);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### .back()
Go back to the previous page.

#### .forward()
Go forward to the next page.

#### .<span class="apidocCodeKeywordSpan">refresh</span>()
Refresh the current page.

#### .click(selector)
Clicks the `selector` element once.

#### .mousedown(selector)
Mousedown the `selector` element once.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.nightmare.actions.screenshot" id="apidoc.element.nightmare.actions.screenshot">
        function <span class="apidocSignatureSpan">nightmare.actions.</span>screenshot
        <span class="apidocSignatureSpan">(path, clip, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">screenshot = function (path, clip, done) {
  debug(&#x27;.screenshot()&#x27;);
  if (typeof path === &#x27;function&#x27;) {
    done = path;
    clip = undefined;
    path = undefined;
  } else if (typeof clip === &#x27;function&#x27;) {
    done = clip;
    clip = (typeof path === &#x27;string&#x27;) ? undefined : path;
    path = (typeof path === &#x27;string&#x27;) ? path : undefined;
  }
  this.child.call(&#x27;screenshot&#x27;, path, clip, function (error, img) {
    var buf = new Buffer(img.data);
    debug(&#x27;.screenshot() captured with length %s&#x27;, buf.length);
    path ? fs.writeFile(path, buf, done) : done(null, buf);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### .once(event, callback)
Similar to `.on()`, but captures page events with the callback one time.

#### .removeListener(event, callback)
Removes a given listener callback for an event.

#### .<span class="apidocCodeKeywordSpan">screenshot</span>([path][, clip])
Takes a screenshot of the current page. Useful for debugging. The output is always a `png`. Both arguments are optional. If `path
` is provided, it saves the image to the disk. Otherwise it returns a `Buffer` of the image data. If `clip` is provided (as [documented
 here](https://github.com/atom/electron/blob/master/docs/api/browser-window.md#wincapturepagerect-callback)), the image will be
clipped to the rectangle.

#### .html(path, saveType)
Save the current page as html as files to disk at the given path. Save type options are [here](https://github.com/atom/electron/
blob/master/docs/api/web-contents.md#webcontentssavepagefullpath-savetype-callback).

#### .pdf(path, options)
Saves a PDF to the specified `path`. Options are [here](https://github.com/electron/electron/blob/v1.4.4/docs/api/web-contents.md
#contentsprinttopdfoptions-callback).
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.nightmare.actions.scrollTo" id="apidoc.element.nightmare.actions.scrollTo">
        function <span class="apidocSignatureSpan">nightmare.actions.</span>scrollTo
        <span class="apidocSignatureSpan">(y, x, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">scrollTo = function (y, x, done) {
  debug(&#x27;.scrollTo()&#x27;);
  this.evaluate_now(function (y, x) {
    window.scrollTo(x, y);
  }, done, y, x);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### .uncheck(selector)
unchecks the `selector` checkbox element.

#### .select(selector, option)
Changes the `selector` dropdown element to the option with attribute [value=`option`]

#### .<span class="apidocCodeKeywordSpan">scrollTo</span>(top, left)
Scrolls the page to desired position. `top` and `left` are always relative to the top left corner of the document.

#### .viewport(width, height)

Set the viewport size.

#### .inject(type, file)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.nightmare.actions.select" id="apidoc.element.nightmare.actions.select">
        function <span class="apidocSignatureSpan">nightmare.actions.</span>select
        <span class="apidocSignatureSpan">(selector, option, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">select = function (selector, option, done) {
  debug(&#x27;.select() &#x27; + selector);
  this.evaluate_now(function(selector, option) {
    var element = document.querySelector(selector);
    var event = document.createEvent(&#x27;HTMLEvents&#x27;);
    element.value = option;
    event.initEvent(&#x27;change&#x27;, true, true);
    element.dispatchEvent(event);
  }, done, selector, option);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### .check(selector)
checks the `selector` checkbox element.

#### .uncheck(selector)
unchecks the `selector` checkbox element.

#### .<span class="apidocCodeKeywordSpan">select</span>(selector, option)
Changes the `selector` dropdown element to the option with attribute [value=`option`]

#### .scrollTo(top, left)
Scrolls the page to desired position. `top` and `left` are always relative to the top left corner of the document.

#### .viewport(width, height)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.nightmare.actions.title" id="apidoc.element.nightmare.actions.title">
        function <span class="apidocSignatureSpan">nightmare.actions.</span>title
        <span class="apidocSignatureSpan">(done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">title = function (done) {
  debug(&#x27;.title() getting it&#x27;);
  this.evaluate_now(function() {
    return document.title;
  }, done);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### .html(path, saveType)
Save the current page as html as files to disk at the given path. Save type options are [here](https://github.com/atom/electron/
blob/master/docs/api/web-contents.md#webcontentssavepagefullpath-savetype-callback).

#### .pdf(path, options)
Saves a PDF to the specified `path`. Options are [here](https://github.com/electron/electron/blob/v1.4.4/docs/api/web-contents.md
#contentsprinttopdfoptions-callback).

#### .<span class="apidocCodeKeywordSpan">title</span>()
Returns the title of the current page.

#### .url()
Returns the url of the current page.

#### .path()
Returns the path name of the current page.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.nightmare.actions.type" id="apidoc.element.nightmare.actions.type">
        function <span class="apidocSignatureSpan">nightmare.actions.</span>type
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">type = function () {
  var selector = arguments[0], text, done;
  if(arguments.length == 2) {
    done = arguments[1];
  } else {
    text = arguments[1];
    done = arguments[2];
  }

  debug(&#x27;.type() %s into %s&#x27;, text, selector);
  var self = this;

  focusSelector.bind(this)(function(err) {
    if(err) {
      debug(&#x27;Unable to .type() into non-existent selector %s&#x27;, selector);
      return done(err);
    }

    var blurDone = blurSelector.bind(this, done, selector);
    if ((text || &#x27;&#x27;) == &#x27;&#x27;) {
      this.evaluate_now(function(selector) {
        document.querySelector(selector).value = &#x27;&#x27;;
      }, blurDone, selector);
    } else {
      self.child.call(&#x27;type&#x27;, text, blurDone);
    }
  }, selector);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

```js
var Nightmare = require(&#x27;nightmare&#x27;);		
var nightmare = Nightmare({ show: true });

nightmare
.goto(&#x27;https://duckduckgo.com&#x27;)
.<span class="apidocCodeKeywordSpan">type</span>(&#x27;#search_form_input_homepage&#x27;, &#x27;github nightmare&#x27;)
.click(&#x27;#search_button_homepage&#x27;)
.wait(&#x27;#zero_click_wrapper .c-info__title a&#x27;)
.evaluate(function () {
  return document.querySelector(&#x27;#zero_click_wrapper .c-info__title a&#x27;).href;
})
.end()
.then(function (result) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.nightmare.actions.uncheck" id="apidoc.element.nightmare.actions.uncheck">
        function <span class="apidocSignatureSpan">nightmare.actions.</span>uncheck
        <span class="apidocSignatureSpan">(selector, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">uncheck = function (selector, done){
  debug(&#x27;.uncheck() &#x27; + selector);
  this.evaluate_now(function(selector) {
      var element = document.querySelector(selector);
      var event = document.createEvent(&#x27;HTMLEvents&#x27;);
      element.checked = null;
      event.initEvent(&#x27;change&#x27;, true, true);
      element.dispatchEvent(event);
    }, done, selector);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Similar to `.type()`. `.insert()` enters the `text` provided into the `selector` element.  Empty or falsey values provided for `
text` will clear the selector&#x27;s value.

`.insert()` is faster than `.type()` but does not trigger the keyboard events.

#### .check(selector)
checks the `selector` checkbox element.

#### .<span class="apidocCodeKeywordSpan">uncheck</span>(selector)
unchecks the `selector` checkbox element.

#### .select(selector, option)
Changes the `selector` dropdown element to the option with attribute [value=`option`]

#### .scrollTo(top, left)
Scrolls the page to desired position. `top` and `left` are always relative to the top left corner of the document.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.nightmare.actions.url" id="apidoc.element.nightmare.actions.url">
        function <span class="apidocSignatureSpan">nightmare.actions.</span>url
        <span class="apidocSignatureSpan">(done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">url = function (done) {
  debug(&#x27;.url() getting it&#x27;);
  this.evaluate_now(function() {
    return document.location.href;
  }, done);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### .pdf(path, options)
Saves a PDF to the specified `path`. Options are [here](https://github.com/electron/electron/blob/v1.4.4/docs/api/web-contents.md
#contentsprinttopdfoptions-callback).

#### .title()
Returns the title of the current page.

#### .<span class="apidocCodeKeywordSpan">url</span>()
Returns the url of the current page.

#### .path()
Returns the path name of the current page.

### Cookies
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.nightmare.actions.useragent" id="apidoc.element.nightmare.actions.useragent">
        function <span class="apidocSignatureSpan">nightmare.actions.</span>useragent
        <span class="apidocSignatureSpan">(useragent, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">useragent = function (useragent, done) {
  debug(&#x27;.useragent() to &#x27; + useragent);
  this.child.call(&#x27;useragent&#x27;, useragent, done);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  maxAuthRetries: 3
});
```

#### .engineVersions()
Gets the versions for Electron and Chromium.

#### .<span class="apidocCodeKeywordSpan">useragent</span>(useragent)
Set the `useragent` used by electron.

#### .authentication(user, password)
Set the `user` and `password` for accessing a web page using basic authentication. Be sure to set it before calling `.goto(url)`.

#### .end()
Complete any queue operations, disconnect and close the electron process.  Note that if you&#x27;re using promises, `.then()` must
 be called after `.end()` to run the `.end()` task.  Also note that if using a `.end()` callback, the `.end()` call is equivalent
 to calling `.end()` followed by `.then(fn)`.  Consider:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.nightmare.actions.viewport" id="apidoc.element.nightmare.actions.viewport">
        function <span class="apidocSignatureSpan">nightmare.actions.</span>viewport
        <span class="apidocSignatureSpan">(width, height, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">viewport = function (width, height, done) {
  debug(&#x27;.viewport()&#x27;);
  this.child.call(&#x27;size&#x27;, width, height, done);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### .select(selector, option)
Changes the `selector` dropdown element to the option with attribute [value=`option`]

#### .scrollTo(top, left)
Scrolls the page to desired position. `top` and `left` are always relative to the top left corner of the document.

#### .<span class="apidocCodeKeywordSpan">viewport</span>(width, height)

Set the viewport size.

#### .inject(type, file)
Inject a local `file` onto the current page. The file `type` must be either `js` or `css`.

#### .evaluate(fn[, arg1, arg2,...])
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.nightmare.actions.visible" id="apidoc.element.nightmare.actions.visible">
        function <span class="apidocSignatureSpan">nightmare.actions.</span>visible
        <span class="apidocSignatureSpan">(selector, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">visible = function (selector, done) {
  debug(&#x27;.visible() for &#x27; + selector);
  this.evaluate_now(function(selector) {
    var elem = document.querySelector(selector);
    if (elem) return (elem.offsetWidth &#x3e; 0 &#x26;&#x26; elem.offsetHeight &#x3e; 0);
    else return false;
  }, done, selector);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Add a header override for all HTTP requests.  If `header` is undefined, the header overrides will be reset.

### Extract from the Page

#### .exists(selector)
Returns whether the selector exists or not on the page.

#### .<span class="apidocCodeKeywordSpan">visible</span>(selector)
Returns whether the selector is visible or not

#### .on(event, callback)
Capture page events with the callback. You have to call `.on()` before calling `.goto()`. Supported events are [documented here](
http://electron.atom.io/docs/api/web-contents/#instance-events).

##### Additional &#x22;page&#x22; events
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.nightmare.actions.wait" id="apidoc.element.nightmare.actions.wait">
        function <span class="apidocSignatureSpan">nightmare.actions.</span>wait
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">wait = function () {
  var args = sliced(arguments);
  var done = args[args.length-1];
  if (args.length &#x3c; 2) {
    debug(&#x27;Not enough arguments for .wait()&#x27;);
    return done();
  }

  var arg = args[0];
  if (typeof arg === &#x27;number&#x27;) {
    debug(&#x27;.wait() for &#x27; + arg + &#x27;ms&#x27;);
    if(arg &#x3c; this.options.waitTimeout){
      waitms(arg, done);
    } else {
      waitms(this.options.waitTimeout, function(){
        done(new Error(&#x27;.wait() timed out after &#x27;+this.options.waitTimeout+&#x27;msec&#x27;));
      }.bind(this));
    }
  }
  else if (typeof arg === &#x27;string&#x27;) {
    var timeout = null;
    if (typeof args[1] === &#x27;number&#x27;) {
      timeout = args[1];
    }
    debug(&#x27;.wait() for &#x27;+arg+&#x27; element&#x27;+(timeout ? &#x27; or &#x27;+timeout+&#x27;msec&#x27; : &#x27;&#x27;));
    waitelem.apply({ timeout: timeout }, [this, arg, done]);
  }
  else if (typeof arg === &#x27;function&#x27;) {
    debug(&#x27;.wait() for fn&#x27;);
    args.unshift(this);
    waitfn.apply(this, args);
  }
  else {
    done();
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var Nightmare = require(&#x27;nightmare&#x27;);		
var nightmare = Nightmare({ show: true });

nightmare
.goto(&#x27;https://duckduckgo.com&#x27;)
.type(&#x27;#search_form_input_homepage&#x27;, &#x27;github nightmare&#x27;)
.click(&#x27;#search_button_homepage&#x27;)
.<span class="apidocCodeKeywordSpan">wait</span>(&#x27;#zero_click_wrapper .c-info__title a&#x27;)
.evaluate(function () {
  return document.querySelector(&#x27;#zero_click_wrapper .c-info__title a&#x27;).href;
})
.end()
.then(function (result) {
  console.log(result);
})
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.nightmare.frame_manager" id="apidoc.module.nightmare.frame_manager">module nightmare.frame_manager</a></h1>


    <h2>
        <a href="#apidoc.element.nightmare.frame_manager.frame_manager" id="apidoc.element.nightmare.frame_manager.frame_manager">
        function <span class="apidocSignatureSpan">nightmare.</span>frame_manager
        <span class="apidocSignatureSpan">(window)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function FrameManager(window) {
  if (!(this instanceof FrameManager)) return new FrameManager(window);

  EventEmitter.call(this);
  var subscribed = false;
  var requestedFrame = false;
  var frameRequestTimeout;
  var self = this;

  this.on(&#x27;newListener&#x27;, subscribe);
  this.on(&#x27;removeListener&#x27;, unsubscribe);

  function subscribe(eventName) {
    if (!subscribed &#x26;&#x26; eventName === &#x27;data&#x27;) {
      parent.emit(&#x27;log&#x27;, &#x27;subscribing to browser window frames&#x27;);
      window.webContents.beginFrameSubscription(receiveFrame);
    }
  }

  function unsubscribe() {
    if (!self.listenerCount(&#x27;data&#x27;)) {
      parent.emit(&#x27;log&#x27;, &#x27;unsubscribing from browser window frames&#x27;)
      window.webContents.endFrameSubscription();
      subscribed = false;
    }
  }

  function receiveFrame(buffer) {
    requestedFrame = false;
    clearTimeout(frameRequestTimeout);
    self.emit(&#x27;data&#x27;, buffer);
  }

<span class="apidocCodeCommentSpan">  /**
   * In addition to listening for events, calling `requestFrame` will ensure
   * that a frame is queued up to render (instead of just waiting for the next
   * time the browser chooses to draw a frame).
   * @param {Function} [callback] Called when the frame is rendered.
   * @param {Number} [timeout=1000] If no frame has been rendered after this
       many milliseconds, run the callback anyway. In this case, The
       callback&#x27;s first argument, an image buffer, will be `null`.
   */
</span>  this.requestFrame = function(callback, timeout) {
    timeout = (timeout == undefined) ? 1000 : timeout;

    if (callback) {
      this.once(&#x27;data&#x27;, callback);
    }

    if (!requestedFrame) {
      requestedFrame = true;

      // Force the browser to render new content by using the debugger to
      // highlight a portion of the page. This way, we can guarantee a change
      // that both requires rendering a frame and does not actually affect
      // the content of the page.
      if (!window.webContents.debugger.isAttached()) {
        try {
          window.webContents.debugger.attach();
        }
        catch (error) {
          parent.emit(&#x27;log&#x27;, `Failed to attach to debugger for frame subscriptions: ${error}`);
          this.emit(&#x27;data&#x27;, null);
          return;
        }
      }

      if (timeout) {
        frameRequestTimeout = setTimeout(function() {
          parent.emit(&#x27;log&#x27;, `FrameManager timing out after ${timeout} ms with no new rendered frames`);
          self.emit(&#x27;data&#x27;, null)
        }, timeout);
      }

      parent.emit(&#x27;log&#x27;, &#x27;Highlighting page to trigger rendering.&#x27;);
      window.webContents.debugger.sendCommand(&#x27;DOM.enable&#x27;)
      window.webContents.debugger.sendCommand(
        &#x27;DOM.highlightRect&#x27;, HIGHLIGHT_STYLE, function(error) {
          window.webContents.debugger.sendCommand(&#x27;DOM.hideHighlight&#x27;);
          window.webContents.debugger.detach();
        });
    }
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.nightmare.frame_manager.super_" id="apidoc.element.nightmare.frame_manager.super_">
        function <span class="apidocSignatureSpan">nightmare.frame_manager.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.nightmare.javascript" id="apidoc.module.nightmare.javascript">module nightmare.javascript</a></h1>


    <h2>
        <a href="#apidoc.element.nightmare.javascript.execute" id="apidoc.element.nightmare.javascript.execute">
        function <span class="apidocSignatureSpan">nightmare.javascript.</span>execute
        <span class="apidocSignatureSpan">(obj )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function anonymous(obj ) {

  function escape(html) {
    return String(html)
      .replace(/&#x26;/g, &#x27;&#x26;amp;&#x27;)
      .replace(/&#x22;/g, &#x27;&#x26;quot;&#x27;)
      .replace(/&#x3c;/g, &#x27;&#x26;lt;&#x27;)
      .replace(/&#x3e;/g, &#x27;&#x26;gt;&#x27;);
  };

  function section(obj, prop, negate, thunk) {
    var val = obj[prop];
    if (Array.isArray(val)) return val.map(thunk).join(&#x27;&#x27;);
    if (&#x27;function&#x27; == typeof val) return val.call(obj, thunk(obj));
    if (negate) val = !val;
    if (val) return thunk(obj);
    return &#x27;&#x27;;
  };

  return &#x22;\n(function javascript () {\n  var ipc = (window.__nightmare ? __nightmare.ipc : window[&#x27;&#x27;].nightmare.ipc);\n  try {\n
    var fn = (&#x22; + obj.src + &#x22;),\n      response, \n      args = [];\n\n    &#x22; + section(obj, &#x22;args&#x22;, false, function(obj){ return &#x22;args.push(&#x22; + obj.argument + &#x22;);&#x22; }) + &#x22;\n\n    if(fn.length - 1 == args.length) {\n      args.push(((err, v) =&#x3e; {\n          if(err) {\n            ipc.send(&#x27;error&#x27;, err.message || err.toString());\n          }\n          ipc.send(&#x27;response&#x27;, v);\n        }));\n      fn.apply(null, args);\n    } \n    else {\n      response = fn.apply(null, args);\n      if(response &#x26;&#x26; response.then) {\n        response.then((v) =&#x3e; {\n          ipc.send(&#x27;response&#x27;, v);\n        })\n        .catch((err) =&#x3e; {\n          ipc.send(&#x27;error&#x27;, err)\n        });\n      } else {\n        ipc.send(&#x27;response&#x27;, response);\n      }\n    }\n  } catch (err) {\n    ipc.send(&#x27;error&#x27;, err.message);\n  }\n})()\n&#x22;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.nightmare.javascript.inject" id="apidoc.element.nightmare.javascript.inject">
        function <span class="apidocSignatureSpan">nightmare.javascript.</span>inject
        <span class="apidocSignatureSpan">(obj )</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function anonymous(obj ) {

  function escape(html) {
    return String(html)
      .replace(/&#x26;/g, &#x27;&#x26;amp;&#x27;)
      .replace(/&#x22;/g, &#x27;&#x26;quot;&#x27;)
      .replace(/&#x3c;/g, &#x27;&#x26;lt;&#x27;)
      .replace(/&#x3e;/g, &#x27;&#x26;gt;&#x27;);
  };

  function section(obj, prop, negate, thunk) {
    var val = obj[prop];
    if (Array.isArray(val)) return val.map(thunk).join(&#x27;&#x27;);
    if (&#x27;function&#x27; == typeof val) return val.call(obj, thunk(obj));
    if (negate) val = !val;
    if (val) return thunk(obj);
    return &#x27;&#x27;;
  };

  return &#x22;\n(function javascript () {\n  var ipc = (window.__nightmare ? __nightmare.ipc : window[&#x27;&#x27;].nightmare.ipc);\n  try {\n
    var response = (function () { &#x22; + obj.src + &#x22;\n})()\n    ipc.send(&#x27;response&#x27;, response);\n  } catch (e) {\n    ipc.send(&#x27;error&#x27;, e.message);\n  }\n})()\n&#x22;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
#### .scrollTo(top, left)
Scrolls the page to desired position. `top` and `left` are always relative to the top left corner of the document.

#### .viewport(width, height)

Set the viewport size.

#### .<span class="apidocCodeKeywordSpan">inject</span>(type, file)
Inject a local `file` onto the current page. The file `type` must be either `js` or `css`.

#### .evaluate(fn[, arg1, arg2,...])
Invokes `fn` on the page with `arg1, arg2,...`. All the `args` are optional. On completion it returns the return value of `fn`.
Useful for extracting information from the page. Here&#x27;s an example:

```js
var selector = &#x27;h1&#x27;;
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
